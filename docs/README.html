<!DOCTYPE html>

<html>
<head>
  <title>Website Permissions</title>
  <link href="search/tipuesearch.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>

<body class="page--readme">
<header>
  <div class="pager"><a href="index.html" class="prev index">&laquo;Website Permissions</a><a href="index.html" class="index pager__book-title">Website Permissions</a><a href="index.html" class="next index">Index&raquo;</a></div></header>
<section class="sub-header">
  <div class="breadcrumbs"><a href="index.html">Index</a>
         &raquo
      </div>      <div class="search__wrapper">
  <form action="search--results.html">
    <input type="text" class="search-input" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>
  </section>


<h1>Website Permissions</h1>

<section>

<p><img src="images/screenshot.jpg" alt="perms" /></p>

<h2>Summary</h2>

<p>This script helps manage website permissions by giving you a clean YAML configuration file in which you define what paths should have READ, WRITE, and EXECUTE permissions, as well as who the user and group should be.  It facilitates different perms by environment: prod, staging, dev.  And automatically handles common Drupal path permissions.</p>

<p><strong>Visit <a href="https://aklump.github.io/website-perms">https://aklump.github.io/website-perms</a> for full documentation.</strong></p>

<h2>Quick Start</h2>

<ul>
<li>Install in your repository root using <code>cloudy pm-install aklump/perms</code></li>
<li>Open <em>bin/config/perms.local.yml</em> and update the <code>user</code> and <code>group</code> values.</li>
<li>Make sure to SCM ignore <em>config/*.local.yml</em> files.</li>
<li>Open <em>bin/config/perms.yml</em> and modify as needed.</li>
<li>Add custom code to <em>bin/_perms.custom.sh</em>, or delete it and comment out related lines in <em>bin/config/perms.yml</em>.</li>
<li>In your CLI enter <code>./bin/perms</code> to get an overview.</li>
</ul>

<h2>Requirements</h2>

<p>You must have <a href="https://github.com/aklump/cloudy">Cloudy</a> installed on your system to install this package.</p>

<h2>Installation</h2>

<p>The installation script above will generate the following structure where <code>.</code> is your repository root.</p>

<pre><code class="text">.
├── bin
│   ├── perms -&gt; ../opt/perms/perms.sh
│   ├── _perms.custom.sh
│   └── config
│       ├── perms.yml
│       └── perms.local.yml
├── opt
│   ├── cloudy
│   └── aklump
│       └── perms
└── {public web root}
</code></pre>

<h3>To Update</h3>

<ul>
<li>Update to the latest version from your repo root: <code>cloudy pm-update aklump/perms</code></li>
</ul>

<h2>Configuration Files</h2>

<table>
<thead>
<tr>
  <th>Filename</th>
  <th>Description</th>
  <th>VCS</th>
</tr>
</thead>
<tbody>
<tr>
  <td><em>perms.yml</em></td>
  <td>Configuration shared across all server environments: prod, staging, dev</td>
  <td>yes</td>
</tr>
<tr>
  <td><em>perms.local.yml</em></td>
  <td>Configuration overrides for a single environment; not version controlled.</td>
  <td>no</td>
</tr>
<tr>
  <td><em>&#95;perms.custom.sh</em></td>
  <td>Optional.  One of any number of custom Bash scripts to be sourced during the <code>apply</code> command.  Use it for anything custom that is not handled by configuration values.  The filename(s) may be configured; see <code>post_apply_scripts</code>.  Return non-zero to indicate a failure. You may delete this if not used, but you must remove the path from <code>post_apply_scripts</code>.</td>
  <td>yes</td>
</tr>
</tbody>
</table>

<h3>Custom Configuration</h3>

<ul>
<li>You may add any additional keys to <code>path_to</code>, to use them in your <code>post_apply_scripts</code>. They will automatically be made available as variables.  For example <code>$path_to_some_path_of_yours</code> holds the config value and is available in all <code>post_apply_scripts</code>.  They will also be automatically validated to make sure they are paths that do exist.</li>
</ul>

<h2>Usage</h2>

<ul>
<li>For a configuration overview <code>./bin/perms</code></li>
<li>To apply permissions: <code>./bin/perms apply</code></li>
<li>To see all commands use <code>./bin/perms help</code></li>
</ul>

<p>If you see <code>Permission denied</code> when running commands, you will need to <code>sudo</code> the command.</p>

<h2>Contributing</h2>

<p>If you find this project useful... please consider <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=4E5KZHDQCEUV8&amp;item_name=Gratitude%20for%20aklump%2Fwebsite-perms">making a donation</a>.</p>
</section>

<div class="search__results">
  <div id="tipue_search_content"></div>
</div>

<footer>
  <div class="pager"><a href="index.html" class="prev index">&laquo;Website Permissions</a><a href="index.html" class="index pager__book-title">Website Permissions</a><a href="index.html" class="next index">Index&raquo;</a></div>  
  <div id="footer-legaleeze">
    <p class="legaleeze center">Version: 1.0.12 &bull; Last Updated: Tue, 15 Jun 2021 10:35:28 -0700</p>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="search/tipuesearch_content.js"></script>
  <script src="search/tipuesearch_set.js"></script>
  <script src="search/tipuesearch.min.js"></script>
  <script>
    $(document).ready(function() {
      $('#tipue_search_input').tipuesearch()
    })
  </script>
<script src="js/core.js"></script>
</body>
</html>

